<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Segarin – Mudah Belanja, Segar Terjaga</title>
  <style>
    :root{--green:#2e8b45;--green-2:#4db36a;--muted:#fbf7f2;--card:#ffffff;--accent:#ff8a65}
    *{box-sizing:border-box}
    body{font-family:Inter, system-ui, -apple-system, 'Segoe UI', Roboto, 'Helvetica Neue', Arial; background:var(--muted);margin:0;color:#14221b;line-height:1.4}
    header{background:linear-gradient(90deg,var(--green),var(--green-2));padding:18px 22px;color:#fff;display:flex;align-items:center;gap:14px}
    header img.logo{height:64px;width:64px;object-fit:contain;border-radius:8px;background:rgba(255,255,255,0.06);padding:6px}
    header .brand{font-size:20px;font-weight:700}
    header .slogan{font-size:13px;opacity:.95}
    nav{margin-left:auto;display:flex;gap:8px;align-items:center}
    .container{max-width:1150px;margin:18px auto;padding:0 18px}
    .grid{display:grid;grid-template-columns:1fr 340px;gap:18px}
    .card{background:var(--card);border-radius:12px;padding:14px;box-shadow:0 6px 18px rgba(12,12,12,.06)}
    .search{display:flex;gap:8px;align-items:center}
    .search input{flex:1;padding:10px;border-radius:10px;border:1px solid #eee;font-size:14px}
    .products{display:grid;grid-template-columns:repeat(3,1fr);gap:14px;margin-top:12px}
    .product{background:linear-gradient(180deg,#fff,#fbfbfb);padding:12px;border-radius:10px;text-align:center;border:1px solid #f0f3f1}
    .product img{width:100%;height:150px;object-fit:cover;border-radius:8px}
    .product h4{margin:8px 0 4px;font-size:15px}
    .product p{margin:0;color:#666;font-size:13px}
    .price{font-weight:700;margin-top:8px}
    .btn{display:inline-block;padding:8px 12px;border-radius:8px;background:var(--green);color:#fff;text-decoration:none;cursor:pointer;border:none}
    .btn.secondary{background:#fff;color:var(--green);border:1px solid rgba(46,139,69,0.12)}
    .small{font-size:13px;padding:6px 10px}
    .sidebar .section{margin-bottom:12px}
    .cart-list{max-height:240px;overflow:auto;margin-top:8px}
    .cart-item{display:flex;gap:8px;align-items:center;border-bottom:1px dashed #eee;padding:8px 0}
    .cart-item img{width:54px;height:54px;border-radius:8px;object-fit:cover}
    .muted{color:#777;font-size:13px}
    .suggest{background:#f6fffa;border:1px solid #dff3e8;padding:10px;border-radius:8px;margin-top:8px}
    .recipe{margin-top:8px;background:#fffbe8;border-radius:8px;padding:10px}
    footer{margin-top:18px;text-align:center;color:#666;font-size:13px;padding:18px}
    .hero{display:flex;gap:12px;align-items:center;justify-content:space-between}
    .hero-left{flex:1;padding-right:12px}
    .hero-banner{background:linear-gradient(90deg,#f7fff6,#f0ffef);border-radius:12px;padding:18px;display:flex;gap:12px;align-items:center}
    .hero-banner img{width:160px;height:90px;object-fit:cover;border-radius:8px}
    @media (max-width:900px){ .grid{grid-template-columns:1fr} .products{grid-template-columns:repeat(2,1fr)} nav{display:none} header{flex-wrap:wrap} .product img{height:120px} }
    @media (max-width:520px){ .products{grid-template-columns:1fr} header img.logo{height:48px;width:48px} }
  </style>
</head>
<body>
  <header>
    <img class="logo" src="assets/logo.png" alt="Segarin Logo">
    <div>
      <div class="brand">Segarin</div>
      <div class="slogan">Mudah Belanja, Segar Terjaga.</div>
    </div>
    <nav>
      <button class="btn secondary" onclick="scrollToCatalog()">Katalog</button>
      <button class="btn" onclick="openWhatsApp()">Hubungi Kami</button>
    </nav>
  </header>

  <main class="container">
    <div class="grid">
      <div>
        <div class="card hero">
          <div class="hero-left">
            <h2 style="margin:0">Katalog Produk Segar</h2>
            <div class="muted">Pilihan sayur, buah, dan bahan dapur yang selalu diperbarui setiap hari.</div>
            <div style="margin-top:12px;display:flex;gap:8px;">
              <div style="flex:1" class="search">
                <input id="search" placeholder="Cari sayur, buah atau bahan..." />
                <button class="btn small" onclick="filterProducts()">Cari</button>
              </div>
              <div style="width:120px">
                <select id="category" onchange="filterProducts()" style="width:100%;padding:8px;border-radius:8px;border:1px solid #eee">
                  <option value="">Semua Kategori</option>
                  <option value="sayur">Sayur</option>
                  <option value="buah">Buah</option>
                  <option value="bumbu">Bumbu</option>
                  <option value="protein">Protein</option>
                </select>
              </div>
            </div>
          </div>
          <div class="hero-banner">
            <img src="assets/prod1.png" alt="banner">
            <div>
              <div style="font-weight:700">Khusus Hari Ini</div>
              <div class="muted">Diskon pengguna baru Rp150.000 (gabungan)</div>
              <div style="margin-top:8px"><button class="btn small" onclick="applyPromo()">Gunakan Promo</button></div>
            </div>
          </div>
        </div>

        <div id="products" class="products" style="margin-top:14px"></div>

        <div class="card" style="margin-top:14px">
          <h3 style="margin:0">Promo & Program Loyalti</h3>
          <div class="muted">Nikmati cashback dan potongan harga setiap minggu. Kumpulkan point tiap pembelian.</div>
          <div style="display:flex;gap:8px;margin-top:10px;flex-wrap:wrap">
            <div class="card" style="padding:10px;min-width:180px">Promo Harian: Cashback 5% untuk sayur segar</div>
            <div class="card" style="padding:10px;min-width:180px">Voucher: DISKON15 untuk pembelian > Rp100.000</div>
            <div class="card" style="padding:10px;min-width:180px">Program Loyalti: 1 poin per Rp10.000</div>
          </div>
        </div>
      </div>

      <aside class="sidebar">
        <div class="card">
          <h3>Segarin Smart Cart</h3>
          <div class="muted">Keranjang pintar memberi saran bahan pelengkap & resep otomatis.</div>

          <div style="margin-top:8px">
            <strong>Keranjang</strong>
            <div class="cart-list" id="cart"></div>
            <div style="display:flex;justify-content:space-between;margin-top:10px;align-items:center">
              <div>
                <div class="muted">Total:</div>
                <div id="totalRp" style="font-weight:700">Rp0</div>
              </div>
              <div>
                <button class="btn" onclick="openCheckout()">Checkout</button>
              </div>
            </div>
          </div>

          <div id="suggestions" class="suggest" style="display:none">
            <strong>Saran Bahan & Resep</strong>
            <div id="suggestList"></div>
            <div class="recipe" id="recipeBox" style="display:none"></div>
          </div>

        </div>

        <div class="card" style="margin-top:12px">
          <h4>Pelacakan Pesanan (Simulasi)</h4>
          <div class="muted">Status pesanan akan terupdate otomatis.</div>
          <div style="margin-top:8px">
            <select id="orderSelect" onchange="startTracking()">
              <option value="">Pilih nomor pesanan contoh</option>
            </select>
          </div>
          <div style="margin-top:10px">
            <div id="trackingStatus" class="muted">Belum ada pelacakan.</div>
          </div>
        </div>

        <div class="card" style="margin-top:12px">
          <h4>Pembayaran Digital</h4>
          <div class="muted">Dukung QRIS (tampilkan barcode), e-wallet, dan transfer bank (simulasi).</div>
          <div style="margin-top:8px;display:flex;gap:8px;flex-direction:column">
            <button class="btn small" onclick="showQRIS()">QRIS (Tampilkan Barcode)</button>
            <button class="btn small" onclick="fakePay('ewallet')">Bayar via E-Wallet</button>
            <button class="btn small" onclick="fakePay('transfer')">Bayar via Transfer</button>
          </div>
        </div>

      </aside>
    </div>

    <footer>
      &copy; Segarin • Mudah Belanja, Segar Terjaga. — Demo statis interaktif.
    </footer>
  </main>

  <!-- Modal Checkout -->
  <div id="modal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.4);z-index:40;">
    <div style="width:720px;max-width:95%;background:#fff;padding:18px;border-radius:12px;">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <h3 style="margin:0">Checkout</h3>
        <button onclick="closeModal()" style="background:none;border:none;font-size:18px;cursor:pointer">✕</button>
      </div>
      <div style="display:flex;gap:12px;margin-top:12px">
        <div style="flex:1">
          <div class="muted">Ringkasan Items</div>
          <div id="checkoutList" style="margin-top:8px"></div>
          <div style="margin-top:10px"><strong>Total: <span id="checkoutTotal">Rp0</span></strong></div>
        </div>
        <div style="width:260px">
          <div class="muted">Pilih Metode Pembayaran</div>
          <div style="margin-top:8px;display:flex;flex-direction:column;gap:8px">
            <button class="btn small" onclick="showQRIS()">QRIS (Tampilkan Barcode)</button>
            <button class="btn small" onclick="fakePay('ewallet')">E-Wallet</button>
            <button class="btn small" onclick="fakePay('transfer')">Transfer Bank</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- QR Modal -->
  <div id="qrModal" style="position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,.45);z-index:50;">
    <div style="background:#fff;padding:18px;border-radius:10px;max-width:90%;width:420px;text-align:center;">
      <h4>Kode QRIS</h4>
      <canvas id="qrcanvas" width="300" height="300" style="background:#fff;border:1px solid #eee;border-radius:8px"></canvas>
      <div style="margin-top:12px">
        <div class="muted">Scan kode untuk melakukan pembayaran QRIS (simulasi).</div>
      </div>
      <div style="margin-top:12px"><button class="btn" onclick="closeQR()">Selesai</button></div>
    </div>
  </div>

<script>
  // Product dataset (using generated placeholders)
  const productsData = [
    {id:'p1',name:'Tomat Segar',cat:'sayur',price:8000,img:'assets/prod1.png'},
    {id:'p2',name:'Wortel Organik',cat:'sayur',price:12000,img:'assets/prod2.png'},
    {id:'p3',name:'Avokad Madu',cat:'buah',price:25000,img:'assets/prod3.png'},
    {id:'p4',name:'Bayam Local',cat:'sayur',price:6000,img:'assets/prod4.png'},
    {id:'p5',name:'Bawang Merah',cat:'bumbu',price:9000,img:'assets/prod5.png'},
    {id:'p6',name:'Telur Ayam Kampung',cat:'protein',price:28000,img:'assets/prod6.png'},
    {id:'p7',name:'Jeruk Manis',cat:'buah',price:14000,img:'assets/prod7.png'},
    {id:'p8',name:'Tahu Sutra',cat:'siap-saji',price:7000,img:'assets/prod8.png'}
  ];

  const smartMap = {
    'Tomat Segar': {suggest:['Bawang Merah','Daun Bawang'], recipe: {title:'Sambal Tomat Segar', steps:['Iris tomat dan bawang','Tumis bawang, masukkan tomat','Bumbui garam & gula','Sajikan'] }},
    'Wortel Organik': {suggest:['Tahu Sutra','Telur Ayam Kampung'], recipe:{title:'Tumis Wortel & Tahu', steps:['Tumis bumbu, masukkan wortel','Tambahkan tahu, masak hingga matang','Bumbui sesuai selera'] }},
    'Avokad Madu': {suggest:['Jeruk Manis'], recipe:{title:'Salad Avokad Jeruk', steps:['Potong avokad & jeruk','Campur, beri minyak zaitun','Taburi garam']}},
  };

  // Render products
  function renderProducts(list){
    const root=document.getElementById('products'); root.innerHTML='';
    list.forEach(p=>{
      const el=document.createElement('div'); el.className='product';
      el.innerHTML = `<img src="${p.img}" alt="${p.name}" /><h4>${p.name}</h4><p class="muted">${p.cat}</p><div class="price">Rp${p.price.toLocaleString('id')}</div><div style="margin-top:8px"><button class='btn small' onclick='addToCart("${p.id}")'>Tambah</button></div>`;
      root.appendChild(el);
    });
  }
  renderProducts(productsData);

  // Search/filter
  function filterProducts(){
    const q = document.getElementById('search').value.toLowerCase();
    const cat = document.getElementById('category').value;
    const filtered = productsData.filter(p=> (p.name.toLowerCase().includes(q) || q==='') && (cat? p.cat===cat : true) );
    renderProducts(filtered);
  }

  // Cart logic
  let cart = [];
  function addToCart(pid){
    const prod = productsData.find(x=>x.id===pid); if(!prod) return;
    const item = cart.find(i=>i.id===pid);
    if(item) item.qty++; else cart.push({id:prod.id,name:prod.name,price:prod.price,qty:1,img:prod.img});
    renderCart();
  }
  function removeFromCart(pid){ cart = cart.filter(i=>i.id!==pid); renderCart(); }

  function renderCart(){
    const croot=document.getElementById('cart'); croot.innerHTML='';
    let total=0;
    cart.forEach(i=>{ total += i.price*i.qty; const div=document.createElement('div'); div.className='cart-item'; div.innerHTML = `<img src='${i.img}'/><div style='flex:1'><div>${i.name}</div><div class='muted'>Rp${i.price.toLocaleString('id')} × ${i.qty}</div></div><div><button onclick="removeFromCart('${i.id}')" style='background:none;border:none;cursor:pointer'>hapus</button></div>`; croot.appendChild(div); });
    document.getElementById('totalRp').innerText = 'Rp'+total.toLocaleString('id');
    updateSuggestions();
  }

  function updateSuggestions(){
    if(cart.length===0){ document.getElementById('suggestions').style.display='none'; return; }
    const names = cart.map(i=>i.name);
    const suggestions = new Set(); let recipe=null;
    names.forEach(n=>{ if(smartMap[n]){ smartMap[n].suggest.forEach(s=>suggestions.add(s)); recipe = smartMap[n].recipe; } });
    const sugEl = document.getElementById('suggestList'); sugEl.innerHTML='';
    if(suggestions.size>0){ document.getElementById('suggestions').style.display='block'; suggestions.forEach(s=>{ const div=document.createElement('div'); div.style.display='flex'; div.style.justifyContent='space-between'; div.style.padding='6px 0'; div.innerHTML = `<div>${s}</div><div><button class='small' onclick="addSuggested('${s}')">Tambah</button></div>`; sugEl.appendChild(div); }); if(recipe){ const rb=document.getElementById('recipeBox'); rb.style.display='block'; rb.innerHTML = `<strong>${recipe.title}</strong><ol style='margin:8px 0;padding-left:18px'>${recipe.steps.map(st=>' <li>'+st+'</li>').join('')}</ol><div style='text-align:right'><button class='btn small' onclick='addRecipeIngredients()'>Tambah Semua Bahan</button></div>`; } } else { document.getElementById('suggestions').style.display='none'; }
  }

  function addSuggested(name){
    let prod = productsData.find(p=>p.name.includes(name));
    if(!prod){
      const id='x'+Math.random().toString(36).slice(2,7);
      prod = {id, name, cat:'tambahan', price:8000, img: 'assets/prod1.png'};
      productsData.push(prod);
    }
    addToCart(prod.id);
  }
  function addRecipeIngredients(){
    for(const n of cart.map(i=>i.name)){
      const map = smartMap[n]; if(map){ map.suggest.forEach(s=>addSuggested(s)); break; }
    }
  }

  // Checkout modal
  function openCheckout(){ if(cart.length===0){ alert('Keranjang kosong. Tambahkan produk terlebih dahulu.'); return; } const m=document.getElementById('modal'); m.style.display='flex'; const list=document.getElementById('checkoutList'); list.innerHTML=''; let total=0; cart.forEach(i=>{ total += i.price*i.qty; const div=document.createElement('div'); div.style.display='flex'; div.style.justifyContent='space-between'; div.style.padding='6px 0'; div.innerHTML = `<div>${i.name} × ${i.qty}</div><div>Rp${(i.price*i.qty).toLocaleString('id')}</div>`; list.appendChild(div); }); document.getElementById('checkoutTotal').innerText = 'Rp'+total.toLocaleString('id'); }
  function closeModal(){ document.getElementById('modal').style.display='none'; }

  // QRIS generate (canvas)
  function showQRIS(){ const modal = document.getElementById('qrModal'); modal.style.display='flex'; const c=document.getElementById('qrcanvas'); const ctx=c.getContext('2d'); ctx.clearRect(0,0,c.width,c.height); const seed = cart.reduce((s,i)=>s + i.name.length + i.qty, 7); for(let y=0;y<25;y++){ for(let x=0;x<25;x++){ const v = Math.abs(Math.sin((x*31+y*17+seed)/7)); ctx.fillStyle = v>0.6 ? '#111' : '#fff'; ctx.fillRect(x*(c.width/25), y*(c.width/25), c.width/25, c.width/25); } } const img = new Image(); img.src='assets/logo.png'; img.onload = ()=>{ ctx.drawImage(img, c.width/2-30, c.height/2-30,60,60); }; }
  function closeQR(){ document.getElementById('qrModal').style.display='none'; }

  function fakePay(type){ closeModal(); closeQR(); alert('Pembayaran simulasi via '+type+' berhasil. Pesanan sedang diproses.'); startOrderSimulation(); }

  // Order tracking simulation
  let trackTimer = null;
  function startTracking(){ const order = document.getElementById('orderSelect').value; if(!order) { document.getElementById('trackingStatus').innerText='Belum ada pelacakan.'; return; } const stages = ['Diterima','Diproses di Gudang','Dikirim Kurir','Dalam Perjalanan','Tiba di Tujuan']; let idx=0; document.getElementById('trackingStatus').innerText = stages[idx]; if(trackTimer) clearInterval(trackTimer); trackTimer = setInterval(()=>{ idx++; if(idx>=stages.length){ document.getElementById('trackingStatus').innerText = 'Selesai — Pesanan telah sampai.'; clearInterval(trackTimer); trackTimer=null; } else document.getElementById('trackingStatus').innerText = stages[idx]; }, 3500); }
  function startOrderSimulation(){ const id = 'ORD' + Math.floor(Math.random()*900+100); const sel = document.getElementById('orderSelect'); const opt = document.createElement('option'); opt.value = id; opt.innerText = id; sel.appendChild(opt); sel.value = id; startTracking(); }

  // Helpers
  function applyPromo(){ alert('Promo DISKON15 diterapkan (simulasi)'); }
  function scrollToCatalog(){ document.getElementById('search').scrollIntoView({behavior:'smooth'}); }
  function openWhatsApp(){ window.open('https://wa.me/628','_blank'); }

  // Currency formatting
  Number.prototype.toLocaleString = function(loc){ return new Intl.NumberFormat('id-ID').format(this); };

  // Initial render
  renderProducts(productsData);
  renderCart();
</script>
</body>
</html>
